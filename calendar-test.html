<!DOCTYPE html>
<html>
<head>
    <title>Calendar Test (Root Level)</title>
</head>
<body>
    <h1>Calendar Test from Root Level</h1>
    <div id="result">Testing...</div>

    <script>
        async function testCalendar() {
            const result = document.getElementById('result');
            
            try {
                console.log('Testing calendar fetch from root level...');
                // Same path as used in dynamic-calendar-loader.js
                const response = await fetch('data/calendars/new-york.ics');
                console.log('Response:', response);
                
                if (response.ok) {
                    const text = await response.text();
                    console.log('Calendar data length:', text.length);
                    
                    result.innerHTML = `
                        <h2>✅ SUCCESS</h2>
                        <p>Status: ${response.status}</p>
                        <p>Size: ${text.length} bytes</p>
                        <p>First line: ${text.split('\n')[0]}</p>
                        <p>Events: ${(text.match(/BEGIN:VEVENT/g) || []).length}</p>
                        <p><strong>This path works! The issue is elsewhere.</strong></p>
                    `;
                } else {
                    result.innerHTML = `
                        <h2>❌ FETCH FAILED</h2>
                        <p>Status: ${response.status}</p>
                        <p>Status Text: ${response.statusText}</p>
                        <p>URL: data/calendars/new-york.ics</p>
                    `;
                }
            } catch (error) {
                console.error('Calendar fetch error:', error);
                result.innerHTML = `
                    <h2>❌ ERROR</h2>
                    <p>Error: ${error.message}</p>
                    <p>Type: ${error.name}</p>
                    <p>URL: data/calendars/new-york.ics</p>
                `;
            }
        }
        
        testCalendar();
    </script>
</body>
</html>