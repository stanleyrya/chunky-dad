<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Wrapping Test - chunky.dad</title>
    <style>
        body {
            font-family: 'Poppins', Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        
        .event-name {
            font-size: 14px;
            font-weight: 600;
            line-height: 1.3;
            margin: 10px 0;
            padding: 8px;
            border: 1px solid #eee;
            background: #fafafa;
            width: 120px; /* Simulate mobile width constraint */
            word-wrap: break-word;
        }
        
        .old-approach {
            background: #ffe6e6;
            border-color: #ffcccc;
        }
        
        .new-approach {
            background: #e6ffe6;
            border-color: #ccffcc;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .example {
            padding: 10px;
            border-radius: 5px;
        }
        
        .old-example {
            background: #ffe6e6;
        }
        
        .new-example {
            background: #e6ffe6;
        }
        
        code {
            background: #f0f0f0;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 12px;
        }
        
        .width-constraint {
            width: 120px;
            border: 2px dashed #999;
            padding: 8px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Text Wrapping Improvement Test</h1>
        <p>This test demonstrates the improvement from hyphenation-based text wrapping to full-line preference wrapping for calendar event names.</p>
        
        <div class="test-section">
            <h3>Problem Statement</h3>
            <p>Previously, event names like "Bear Happy Hour" would be hyphenated awkwardly when space was limited, resulting in text like "Bear ha—ppy hour". The new approach prefers to use full lines instead of hyphenating words.</p>
        </div>
        
        <div class="comparison">
            <div class="example old-example">
                <h4>❌ Old Approach (Hyphenation)</h4>
                <div class="width-constraint">
                    <div class="event-name old-approach">Bear ha-ppy hour</div>
                    <div class="event-name old-approach">Week-ly social</div>
                    <div class="event-name old-approach">Mega-woof party</div>
                </div>
                <p><strong>Issues:</strong></p>
                <ul>
                    <li>Awkward word breaks</li>
                    <li>Reduced readability</li>
                    <li>Unnatural text flow</li>
                </ul>
            </div>
            
            <div class="example new-example">
                <h4>✅ New Approach (Full Lines)</h4>
                <div class="width-constraint">
                    <div class="event-name new-approach">Bear<br>happy<br>hour</div>
                    <div class="event-name new-approach">Weekly<br>social</div>
                    <div class="event-name new-approach">Mega<br>woof<br>party</div>
                </div>
                <p><strong>Benefits:</strong></p>
                <ul>
                    <li>Natural word boundaries</li>
                    <li>Better readability</li>
                    <li>Cleaner appearance</li>
                </ul>
            </div>
        </div>
        
        <div class="test-section">
            <h3>Implementation Strategy</h3>
            <p>The new text wrapping logic uses three strategies in order of preference:</p>
            <ol>
                <li><strong>Natural Word Flow:</strong> Let words flow naturally across lines without forced breaks</li>
                <li><strong>Balanced Distribution:</strong> Try to balance line lengths for better visual appearance</li>
                <li><strong>Aggressive Fitting:</strong> Use truncation and hyphenation only as a last resort</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h3>Technical Details</h3>
            <p>Key changes made to <code>dynamic-calendar-loader.js</code>:</p>
            <ul>
                <li>Replaced <code>buildThreeLineText()</code> with intelligent word distribution</li>
                <li>Added <code>distributeWordsAcrossLines()</code> with multiple strategies</li>
                <li>Added <code>tryNaturalWordFlow()</code> for natural text flow</li>
                <li>Added <code>tryBalancedDistribution()</code> for visual balance</li>
                <li>Added <code>isGoodDistribution()</code> for quality assessment</li>
                <li>Hyphenation now used only as last resort in aggressive fitting</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>Test Cases</h3>
            <p>The following event names should now display with better text wrapping:</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin: 15px 0;">
                <div class="width-constraint">
                    <div class="event-name new-approach">Bear Happy Hour</div>
                </div>
                <div class="width-constraint">
                    <div class="event-name new-approach">Weekly Social Night</div>
                </div>
                <div class="width-constraint">
                    <div class="event-name new-approach">MEGA-WOOF Party</div>
                </div>
                <div class="width-constraint">
                    <div class="event-name new-approach">Leather Night Out</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>Next Steps</h3>
            <p>To see the improvements in action:</p>
            <ol>
                <li>Navigate to a city page (e.g., <code>city.html?city=new-york</code>)</li>
                <li>Look at event names in the calendar grid</li>
                <li>Resize the browser window to see responsive behavior</li>
                <li>Check mobile view for optimal text display</li>
            </ol>
        </div>
    </div>
</body>
</html>