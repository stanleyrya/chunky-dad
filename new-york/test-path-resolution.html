<!DOCTYPE html>
<html>
<head>
    <title>City Path Resolution Test</title>
</head>
<body>
    <h1>City Path Resolution Test (New York)</h1>
    <div id="results"></div>
    
    <script src="../js/logger.js"></script>
    <script src="../js/city-config.js"></script>
    <script src="../js/app.js"></script>
    
    <script>
        // Test path resolution from city subdirectory
        document.addEventListener('DOMContentLoaded', () => {
            const results = document.getElementById('results');
            
            // Test PathUtils
            const pathUtils = window.pathUtils;
            const testPaths = [
                'data/calendars/new-york.ics',
                'Rising_Star_Ryan_Head_Compressed.png',
                'styles.css'
            ];
            
            results.innerHTML = '<h2>City Subdirectory Path Tests:</h2>';
            testPaths.forEach(path => {
                const resolved = pathUtils.resolvePath(path);
                results.innerHTML += `<p><strong>${path}</strong> â†’ <code>${resolved}</code></p>`;
            });
            
            // Test city detection
            const isCity = window.chunkyApp?.isCityPage;
            const citySlug = window.chunkyApp?.getCitySlugFromPath();
            
            results.innerHTML += '<h2>City Detection:</h2>';
            results.innerHTML += `<p><strong>Is City Page:</strong> ${isCity}</p>`;
            results.innerHTML += `<p><strong>City Slug:</strong> ${citySlug || 'none'}</p>`;
            results.innerHTML += `<p><strong>Current Path:</strong> ${window.location.pathname}</p>`;
            results.innerHTML += `<p><strong>Is Subdirectory:</strong> ${pathUtils.isSubdirectory}</p>`;
            results.innerHTML += `<p><strong>Path Prefix:</strong> "${pathUtils.pathPrefix}"</p>`;
            
            console.log('City path resolution test complete');
        });
    </script>
</body>
</html>