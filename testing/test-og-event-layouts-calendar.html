<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🎨 OpenGraph Image Studio – chunky.dad</title>
  <link rel="stylesheet" href="../styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Roboto+Mono:wght@300;400;500;600&family=Poppins:wght@300;400;600;700;900&family=Bebas+Neue&family=Oswald:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; background: var(--background-primary); color: var(--text-primary); }
    .container { max-width: 1400px; margin: 0 auto; padding: 20px; }

    header { position: sticky; top: 0; background: var(--gradient-primary); z-index: 10; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    nav .nav-container { display: flex; align-items: center; justify-content: space-between; padding: 0.75rem 2rem; max-width: 1400px; margin: 0 auto; }
    .logo h1 { font-size: 20px; font-weight: 700; display: flex; align-items: center; }
    .logo a { color: var(--text-inverse); text-decoration: none; display: inline-flex; align-items: center; gap: 10px; }
    .logo-img { width: 28px; height: 28px; }

    main { padding: 24px 0 40px; }
    .page-title { display: flex; align-items: center; justify-content: space-between; gap: 16px; margin-bottom: 20px; flex-wrap: wrap; }
    .page-title h2 { font-size: 32px; font-weight: 700; margin: 0; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .subtitle { color: var(--text-secondary); font-size: 15px; line-height: 1.5; }

    .controls-panel { background: var(--white); border-radius: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); padding: 24px; margin-bottom: 24px; border: 2px solid var(--border-lighter); }
    .controls-section { margin-bottom: 20px; }
    .controls-section:last-child { margin-bottom: 0; }
    .controls-section h3 { font-size: 14px; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; margin: 0 0 12px 0; }
    .controls-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; }
    .control-field { display: flex; flex-direction: column; gap: 6px; }
    .control-field label { font-size: 13px; color: var(--text-secondary); font-weight: 500; }
    .control-field input, .control-field select { padding: 10px 12px; border-radius: 8px; border: 1.5px solid var(--border-lighter); background: var(--white); color: var(--text-primary); font-family: inherit; transition: all 0.2s; }
    .control-field input:focus, .control-field select:focus { outline: none; border-color: #ff6b35; box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1); }
    .control-field.full { grid-column: 1 / -1; }
    .button-group { display: flex; gap: 8px; flex-wrap: wrap; }
    .btn { padding: 10px 18px; border-radius: 8px; border: 1.5px solid var(--border-lighter); background: var(--white); cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.2s; font-family: inherit; }
    .btn:hover { background: var(--background-light); transform: translateY(-1px); }
    .btn.primary { background: var(--gradient-primary); color: var(--text-inverse); border: 0; }
    .btn.primary:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3); }

    .theme-picker { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; }
    .theme-option { aspect-ratio: 2/1; border-radius: 10px; cursor: pointer; border: 3px solid transparent; transition: all 0.2s; position: relative; overflow: hidden; }
    .theme-option:hover { transform: scale(1.05); border-color: rgba(255, 107, 53, 0.3); }
    .theme-option.active { border-color: #ff6b35; box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2); transform: scale(1.05); }
    .theme-option .theme-name { position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 4px 8px; font-size: 11px; font-weight: 600; text-align: center; }

    /* Theme backgrounds */
    .theme-classic-night { background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); }
    .theme-cool-neon { background: linear-gradient(135deg, #00d4ff 0%, #090979 100%); }
    .theme-hot-red { background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%); }
    .theme-midnight { background: linear-gradient(135deg, #2c3e50 0%, #000000 100%); }
    .theme-spotlight { background: radial-gradient(1000px 400px at 0% 0%, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0) 60%), linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .theme-sunset { background: linear-gradient(135deg, #ff512f 0%, #dd2476 100%); }
    .theme-ocean { background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%); }
    .theme-forest { background: linear-gradient(135deg, #134e5e 0%, #71b280 100%); }
    .theme-fire { background: linear-gradient(135deg, #f12711 0%, #f5af19 100%); }
    .theme-blurple { background: linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%); }
    .theme-pastel { background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%); }
    .theme-blue-bolt { background: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%); }
    .theme-green-glow { background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%); }
    .theme-rainbow { background: conic-gradient(from 180deg at 50% 50%, #ff6a00, #ee0979, #8e2de2, #4a00e0, #00c6ff, #00b09b, #ff6a00); }
    .theme-emerald { background: linear-gradient(135deg, #1f4037 0%, #99f2c8 100%); }
    .theme-purple-haze { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .theme-rose-gold { background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%); }
    .theme-teal-sea { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
    .theme-dark-purple { background: linear-gradient(135deg, #2c003e 0%, #512b58 100%); }
    .theme-custom { background: linear-gradient(135deg, var(--custom-color-1, #8e2de2), var(--custom-color-2, #4a00e0)); }

    .custom-colors { display: flex; gap: 12px; align-items: end; }
    .color-picker-field { flex: 1; }
    .color-input-wrapper { position: relative; }
    .color-input-wrapper input[type="color"] { width: 100%; height: 44px; border-radius: 8px; border: 1.5px solid var(--border-lighter); cursor: pointer; }

    .variants-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 20px; }
    .variant-card { background: var(--white); border: 2px solid var(--border-lighter); border-radius: 16px; overflow: hidden; box-shadow: 0 4px 16px rgba(0,0,0,0.08); transition: all 0.3s; }
    .variant-card:hover { box-shadow: 0 8px 24px rgba(0,0,0,0.12); transform: translateY(-2px); }
    .variant-header { display: flex; justify-content: space-between; align-items: center; padding: 14px 16px; border-bottom: 2px solid var(--border-lighter); background: var(--background-light); }
    .variant-title { font-weight: 700; font-size: 14px; color: var(--text-primary); }
    .variant-description { font-size: 12px; color: var(--text-secondary); }
    .variant-preview { aspect-ratio: 1200 / 630; width: 100%; background: #0a0a0a; display: grid; place-items: center; overflow: hidden; position: relative; }
    .artboard { width: 1200px; height: 630px; position: relative; overflow: hidden; transform-origin: top left; font-family: 'Poppins', sans-serif; }

    /* Cover image support */
    .artboard .cover { position: absolute; inset: 0; background-position: center; background-size: cover; background-repeat: no-repeat; z-index: 0; }

    /* LAYOUT: Split Screen */
    .layout-split-screen { background: #000; position: relative; }
    .layout-split-screen .left-side { position: absolute; left: 0; top: 0; bottom: 0; width: 55%; clip-path: polygon(0 0, 100% 0, 85% 100%, 0 100%); z-index: 1; }
    .layout-split-screen .left-side .cover { position: absolute; inset: 0; background-size: cover; background-position: center; opacity: 0.3; }
    .layout-split-screen .left-content { position: absolute; left: 60px; top: 60px; bottom: 60px; width: 420px; display: flex; flex-direction: column; justify-content: center; z-index: 2; }
    .layout-split-screen .brand { font-size: 20px; font-weight: 700; color: #fff; text-transform: uppercase; letter-spacing: 3px; margin-bottom: 30px; opacity: 0.9; }
    .layout-split-screen .event-title { font-size: 64px; line-height: 0.95; font-weight: 900; color: #fff; margin-bottom: 20px; text-shadow: 0 4px 20px rgba(0,0,0,0.5); }
    .layout-split-screen .event-date { font-size: 24px; color: #fff; opacity: 0.9; margin-bottom: 10px; }
    .layout-split-screen .venue { font-size: 20px; color: #fff; opacity: 0.8; }
    .layout-split-screen .right-side { position: absolute; right: 0; top: 0; bottom: 0; width: 50%; display: flex; align-items: center; justify-content: center; z-index: 0; }
    .layout-split-screen .event-image { width: 400px; height: 500px; background-size: cover; background-position: center; z-index: 1; box-shadow: -20px 0 60px rgba(0,0,0,0.5); }
    .layout-split-screen .description { position: absolute; bottom: 60px; right: 60px; width: 380px; font-size: 18px; color: #fff; opacity: 0.9; line-height: 1.5; z-index: 2; text-align: right; }

    /* LAYOUT: Minimal */
    .layout-minimal { background: #fafafa; }
    .layout-minimal .card { position: absolute; inset: 60px; background: #fff; border-radius: 30px; box-shadow: 0 30px 100px rgba(0,0,0,0.15); overflow: hidden; z-index: 1; }
    .layout-minimal .card-header { height: 280px; position: relative; overflow: hidden; }
    .layout-minimal .card-header .cover { position: absolute; inset: 0; background-size: cover; background-position: center; opacity: 0.4; }
    .layout-minimal .card-header .overlay { position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.6) 100%); }
    .layout-minimal .card-header .date-badge { position: absolute; top: 30px; right: 30px; background: #fff; color: #333; padding: 12px 24px; border-radius: 30px; font-weight: 700; font-size: 16px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
    .layout-minimal .event-image { position: absolute; bottom: -20px; left: 60px; width: 160px; height: 160px; border-radius: 20px; border: 8px solid #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 2; background: transparent; object-fit: contain; }
    .layout-minimal .card-body { padding: 60px 60px 40px 260px; position: relative; }
    .layout-minimal .event-title { font-size: 48px; font-weight: 900; color: #333; line-height: 1.1; margin-bottom: 15px; }
    .layout-minimal .venue { font-size: 20px; color: #666; margin-bottom: 20px; }
    .layout-minimal .description { font-size: 16px; color: #888; line-height: 1.6; }
    .layout-minimal .brand { position: absolute; bottom: 30px; left: 60px; font-size: 14px; font-weight: 700; color: #aaa; text-transform: uppercase; letter-spacing: 2px; }

    /* LAYOUT: Glass Card */
    .layout-glass { position: relative; backdrop-filter: blur(0px); }
    .layout-glass .cover { filter: brightness(0.6); }
    .layout-glass .glass { position: absolute; inset: 80px; background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.25); border-radius: 24px; backdrop-filter: blur(12px); box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
    .layout-glass .glass .inner { position: absolute; inset: 0; padding: 40px; color: #fff; }
    .layout-glass .event-title { font-size: 72px; font-weight: 900; line-height: 0.95; text-shadow: 0 6px 30px rgba(0,0,0,0.6); }
    .layout-glass .event-date { margin-top: 16px; font-size: 26px; opacity: 0.95; }
    .layout-glass .venue { margin-top: 8px; font-size: 22px; opacity: 0.85; }
    .layout-glass .description { position: absolute; left: 40px; right: 40px; bottom: 40px; font-size: 18px; opacity: 0.95; }

    /* LAYOUT: Circle Focus */
    .layout-circle { position: relative; background: #0b0b0f; }
    .layout-circle .ring { position: absolute; width: 560px; height: 560px; border-radius: 50%; left: 60px; top: 35px; background: radial-gradient(circle, rgba(255,255,255,0.15), transparent 60%); border: 3px solid rgba(255,255,255,0.18); }
    .layout-circle .event-image { position: absolute; left: 100px; top: 75px; width: 480px; height: 480px; border-radius: 50%; background-size: cover; background-position: center; box-shadow: 0 20px 80px rgba(0,0,0,0.6); }
    .layout-circle .text { position: absolute; right: 60px; top: 100px; width: 480px; color: #fff; }
    .layout-circle .event-title { font-size: 72px; line-height: 0.95; font-weight: 900; }
    .layout-circle .event-date { margin-top: 10px; font-size: 26px; opacity: 0.9; }
    .layout-circle .venue { margin-top: 6px; font-size: 22px; opacity: 0.8; }
    .layout-circle .description { position: absolute; bottom: 60px; right: 60px; width: 480px; color: #fff; opacity: 0.9; line-height: 1.5; }

    /* Speech Bubble (logo talks) */
    .layout-speech { position: relative; }
    .layout-speech .cover { position: absolute; inset: 0; background-size: cover; background-position: center; opacity: 0.2; }
    .layout-speech .logo-avatar { position: absolute; left: 80px; bottom: 80px; width: 160px; height: 160px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); object-fit: contain; }
    .layout-speech .speech-bubble { position: absolute; left: 270px; bottom: 160px; max-width: 760px; background: #fff; color: #111; border-radius: 22px; padding: 22px 26px; box-shadow: 0 20px 60px rgba(0,0,0,0.35); font-size: 26px; line-height: 1.25; }
    .layout-speech .speech-bubble:after { content: ""; position: absolute; left: -28px; bottom: 22px; width: 0; height: 0; border-top: 20px solid transparent; border-bottom: 20px solid transparent; border-right: 28px solid #fff; filter: drop-shadow(0 6px 6px rgba(0,0,0,0.2)); }
    .layout-speech .headline { position: absolute; left: 80px; top: 70px; right: 60px; color: #fff; font-size: 64px; line-height: 0.95; font-weight: 900; text-shadow: 0 6px 30px rgba(0,0,0,0.6); }
    .layout-speech .event-image { position: absolute; right: 80px; top: 80px; width: 340px; height: 220px; background-size: cover; background-position: center; border: 8px solid rgba(255,255,255,0.9); box-shadow: 0 20px 60px rgba(0,0,0,0.4); }
    .layout-speech .brand { position: absolute; left: 80px; bottom: 40px; color: rgba(255,255,255,0.85); font-weight: 700; letter-spacing: 2px; text-transform: uppercase; font-size: 14px; }

    /* Event Image Speaks */
    .layout-speech-event { position: relative; }
    .layout-speech-event .event-avatar { position: absolute; right: 80px; bottom: 80px; width: 200px; height: 200px; border-radius: 50%; box-shadow: 0 15px 50px rgba(0,0,0,0.5); border: 8px solid rgba(255,255,255,0.95); background-size: cover; background-position: center; }
    .layout-speech-event .speech-bubble { position: absolute; right: 320px; bottom: 180px; max-width: 700px; background: #fff; color: #111; border-radius: 25px; padding: 28px 32px; box-shadow: 0 25px 70px rgba(0,0,0,0.4); font-size: 28px; line-height: 1.3; font-weight: 600; }
    .layout-speech-event .speech-bubble:after { content: ""; position: absolute; right: -32px; bottom: 28px; width: 0; height: 0; border-top: 24px solid transparent; border-bottom: 24px solid transparent; border-left: 32px solid #fff; filter: drop-shadow(0 8px 8px rgba(0,0,0,0.2)); }
    .layout-speech-event .title-bg { position: absolute; left: 60px; top: 60px; right: 60px; height: 140px; background: rgba(255,255,255,0.15); backdrop-filter: blur(8px); border-radius: 20px; border: 2px solid rgba(255,255,255,0.25); }
    .layout-speech-event .event-title { position: absolute; left: 80px; top: 90px; right: 80px; color: #fff; font-size: 56px; line-height: 0.95; font-weight: 900; text-shadow: 0 4px 20px rgba(0,0,0,0.4); text-align: center; }
    .layout-speech-event .brand { position: absolute; left: 80px; bottom: 40px; color: rgba(255,255,255,0.9); font-weight: 700; letter-spacing: 2px; text-transform: uppercase; font-size: 16px; }

    /* Dual Conversation */
    .layout-speech-dual { position: relative; }
    .layout-speech-dual .logo-avatar { position: absolute; left: 60px; top: 120px; width: 120px; height: 120px; object-fit: contain; }
    .layout-speech-dual .event-avatar { position: absolute; right: 60px; bottom: 120px; width: 140px; height: 140px; border-radius: 50%; box-shadow: 0 12px 35px rgba(0,0,0,0.4); border: 5px solid rgba(255,255,255,0.9); background-size: cover; background-position: center; }
    .layout-speech-dual .speech-bubble-1 { position: absolute; left: 200px; top: 80px; max-width: 450px; background: #fff; color: #111; border-radius: 18px; padding: 18px 22px; box-shadow: 0 15px 40px rgba(0,0,0,0.3); font-size: 20px; line-height: 1.3; }
    .layout-speech-dual .speech-bubble-1:after { content: ""; position: absolute; left: -18px; top: 20px; width: 0; height: 0; border-top: 15px solid transparent; border-bottom: 15px solid transparent; border-right: 18px solid #fff; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.15)); }
    .layout-speech-dual .speech-bubble-2 { position: absolute; right: 220px; bottom: 80px; max-width: 480px; background: rgba(255,255,255,0.95); color: #111; border-radius: 18px; padding: 18px 22px; box-shadow: 0 15px 40px rgba(0,0,0,0.3); font-size: 18px; line-height: 1.3; }
    .layout-speech-dual .speech-bubble-2:after { content: ""; position: absolute; right: -18px; bottom: 20px; width: 0; height: 0; border-top: 15px solid transparent; border-bottom: 15px solid transparent; border-left: 18px solid rgba(255,255,255,0.95); filter: drop-shadow(0 4px 4px rgba(0,0,0,0.15)); }

    /* Retro Terminal */
    .layout-speech-terminal { background: #0f3460; position: relative; }
    .layout-speech-terminal:before { content: ""; position: absolute; inset: 0; background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,255,0,0.03) 2px, rgba(0,255,0,0.03) 4px); }
    .layout-speech-terminal .terminal-window { position: absolute; inset: 60px; background: #001122; border: 2px solid #00ff00; border-radius: 8px; box-shadow: inset 0 0 20px rgba(0,255,0,0.1); }
    .layout-speech-terminal .terminal-header { position: absolute; top: 0; left: 0; right: 0; height: 30px; background: #003366; border-bottom: 1px solid #00ff00; display: flex; align-items: center; padding: 0 10px; }
    .layout-speech-terminal .terminal-buttons { display: flex; gap: 5px; }
    .layout-speech-terminal .terminal-button { width: 12px; height: 12px; border-radius: 50%; background: #00ff00; }
    .layout-speech-terminal .terminal-content { position: absolute; top: 40px; left: 20px; right: 20px; bottom: 20px; font-family: 'Courier New', monospace; color: #00ff00; font-size: 18px; line-height: 1.4; }
    .layout-speech-terminal .event-image { position: absolute; right: 40px; bottom: 40px; width: 200px; height: 150px; background-size: cover; background-position: center; border: 2px solid #00ff00; filter: contrast(1.2) brightness(0.9); }
    .layout-speech-terminal .cursor { animation: blink 1s infinite; }
    @keyframes blink { 0%, 50% { opacity: 1; } 51%, 100% { opacity: 0; } }

    /* Instagram Story */
    .layout-speech-story { background: linear-gradient(135deg, #833ab4 0%, #fd1d1d 50%, #fcb045 100%); position: relative; }
    .layout-speech-story .story-frame { position: absolute; inset: 40px; border-radius: 20px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
    .layout-speech-story .story-bg { position: absolute; inset: 0; background-size: cover; background-position: center; filter: brightness(0.7); }
    .layout-speech-story .story-overlay { position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.6) 100%); }
    .layout-speech-story .profile-section { position: absolute; top: 30px; left: 30px; right: 30px; display: flex; align-items: center; gap: 15px; }
    .layout-speech-story .profile-avatar { width: 60px; height: 60px; border: 3px solid #fff; background: #fff; object-fit: contain; }
    .layout-speech-story .profile-info { color: #fff; }
    .layout-speech-story .profile-name { font-size: 16px; font-weight: 700; margin-bottom: 2px; }
    .layout-speech-story .profile-time { font-size: 12px; opacity: 0.8; }
    .layout-speech-story .story-bubble { position: absolute; left: 30px; right: 30px; bottom: 80px; background: rgba(255,255,255,0.95); color: #333; border-radius: 25px; padding: 24px 28px; font-size: 22px; line-height: 1.3; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
    .layout-speech-story .event-title { position: absolute; left: 30px; right: 30px; top: 50%; transform: translateY(-50%); color: #fff; font-size: 42px; line-height: 1.1; font-weight: 900; text-align: center; text-shadow: 0 4px 15px rgba(0,0,0,0.6); }

    /* Thought Cloud */
    .layout-speech-thought { position: relative; }
    .layout-speech-thought .dreamer { position: absolute; left: 80px; bottom: 80px; width: 180px; height: 180px; object-fit: contain; }
    .layout-speech-thought .thought-cloud { position: absolute; left: 320px; bottom: 200px; max-width: 700px; background: #fff; color: #333; border-radius: 50px; padding: 32px 40px; box-shadow: 0 25px 60px rgba(0,0,0,0.3); font-size: 24px; line-height: 1.4; position: relative; }
    .layout-speech-thought .thought-bubble-1 { position: absolute; left: -40px; bottom: 30px; width: 30px; height: 30px; background: #fff; border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
    .layout-speech-thought .thought-bubble-2 { position: absolute; left: -20px; bottom: 10px; width: 20px; height: 20px; background: #fff; border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
    .layout-speech-thought .thought-bubble-3 { position: absolute; left: -8px; bottom: -5px; width: 12px; height: 12px; background: #fff; border-radius: 50%; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
    .layout-speech-thought .event-image { position: absolute; right: 80px; top: 80px; width: 320px; height: 240px; background-size: cover; background-position: center; border-radius: 20px; border: 6px solid rgba(255,255,255,0.9); box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
    .layout-speech-thought .event-title { position: absolute; left: 80px; top: 80px; max-width: 500px; color: #fff; font-size: 52px; line-height: 1.1; font-weight: 900; text-shadow: 0 6px 25px rgba(0,0,0,0.5); }

    /* Messenger Chat */
    .layout-speech-messenger { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative; }
    .layout-speech-messenger .chat-container { position: absolute; inset: 60px; background: #fff; border-radius: 20px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
    .layout-speech-messenger .chat-header { position: absolute; top: 0; left: 0; right: 0; height: 80px; background: #4267B2; display: flex; align-items: center; padding: 0 20px; gap: 15px; }
    .layout-speech-messenger .chat-avatar { width: 50px; height: 50px; object-fit: contain; }
    .layout-speech-messenger .chat-title { color: #fff; font-size: 20px; font-weight: 700; }
    .layout-speech-messenger .chat-body { position: absolute; top: 80px; left: 0; right: 0; bottom: 0; padding: 30px; background: #f0f2f5; }
    .layout-speech-messenger .message-bubble { background: #4267B2; color: #fff; border-radius: 20px; padding: 16px 20px; font-size: 18px; line-height: 1.4; max-width: 400px; margin-left: auto; margin-bottom: 15px; }
    .layout-speech-messenger .message-image { width: 300px; height: 200px; background-size: cover; background-position: center; border-radius: 15px; margin-left: auto; margin-bottom: 15px; }
    .layout-speech-messenger .typing-indicator { display: flex; align-items: center; gap: 8px; color: #65676b; font-size: 14px; }
    .layout-speech-messenger .typing-dots { display: flex; gap: 3px; }
    .layout-speech-messenger .typing-dot { width: 6px; height: 6px; background: #65676b; border-radius: 50%; animation: typingDot 1.4s infinite ease-in-out; }
    .layout-speech-messenger .typing-dot:nth-child(1) { animation-delay: -0.32s; }
    .layout-speech-messenger .typing-dot:nth-child(2) { animation-delay: -0.16s; }
    @keyframes typingDot { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

    /* Discord Chat */
    .layout-speech-discord { background: #36393f; position: relative; }
    .layout-speech-discord .discord-container { position: absolute; inset: 40px; background: #2f3136; border-radius: 8px; overflow: hidden; }
    .layout-speech-discord .discord-sidebar { position: absolute; left: 0; top: 0; bottom: 0; width: 200px; background: #202225; border-right: 1px solid #40444b; }
    .layout-speech-discord .discord-main { position: absolute; left: 200px; top: 0; right: 0; bottom: 0; }
    .layout-speech-discord .discord-header { position: absolute; top: 0; left: 0; right: 0; height: 60px; background: #36393f; border-bottom: 1px solid #40444b; display: flex; align-items: center; padding: 0 20px; }
    .layout-speech-discord .channel-name { color: #fff; font-size: 18px; font-weight: 600; }
    .layout-speech-discord .discord-messages { position: absolute; top: 60px; left: 0; right: 0; bottom: 0; padding: 20px; }
    .layout-speech-discord .message { display: flex; gap: 15px; margin-bottom: 20px; }
    .layout-speech-discord .message-avatar { width: 40px; height: 40px; object-fit: contain; flex-shrink: 0; }
    .layout-speech-discord .message-content { flex: 1; }
    .layout-speech-discord .message-header { display: flex; align-items: baseline; gap: 10px; margin-bottom: 5px; }
    .layout-speech-discord .message-author { color: #fff; font-size: 16px; font-weight: 600; }
    .layout-speech-discord .message-time { color: #72767d; font-size: 12px; }
    .layout-speech-discord .message-text { color: #dcddde; font-size: 16px; line-height: 1.4; }
    .layout-speech-discord .message-embed { background: #2f3136; border-left: 4px solid #5865f2; border-radius: 4px; padding: 15px; margin-top: 10px; }
    .layout-speech-discord .embed-image { width: 300px; height: 180px; background-size: cover; background-position: center; border-radius: 4px; margin-top: 10px; }

    @media (max-width: 768px) {
      .controls-grid { grid-template-columns: 1fr; }
      .variants-grid { grid-template-columns: 1fr; }
      .page-title { flex-direction: column; align-items: start; }
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="nav-container">
        <div class="logo">
          <h1><a href="../index.html"><img src="../Rising_Star_Ryan_Head_Compressed.png" alt="chunky.dad logo" class="logo-img"> chunky.dad</a></h1>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <div class="container">
      <div class="page-title">
        <div>
          <h2>🎨 OpenGraph Image Studio</h2>
          <div class="subtitle">Create stunning social media preview images for your events with 12+ beautiful layouts</div>
        </div>
      </div>

      <div class="controls-panel">
        <div class="controls-section">
          <h3>📍 Event Selection</h3>
          <div class="controls-grid">
            <div class="control-field">
              <label for="citySelect">City</label>
              <select id="citySelect"></select>
            </div>
            <div class="control-field" style="grid-column: span 2;">
              <label for="eventSelect">Event</label>
              <select id="eventSelect"></select>
            </div>
            <div class="control-field">
              <label for="eventSearch">Search Events</label>
              <input id="eventSearch" type="text" placeholder="Type to filter...">
            </div>
          </div>
          <div class="button-group" style="margin-top: 12px;">
            <button id="reloadBtn" class="btn">🔄 Reload Events</button>
            <button id="randomBtn" class="btn">🎲 Random Event</button>
          </div>
        </div>

        <div class="controls-section">
          <h3>🎨 Color Theme</h3>
          <div class="theme-picker">
            <div class="theme-option theme-classic-night" data-theme="classic-night">
              <div class="theme-name">Classic Night</div>
            </div>
            <div class="theme-option theme-cool-neon" data-theme="cool-neon">
              <div class="theme-name">Cool Neon</div>
            </div>
            <div class="theme-option theme-hot-red" data-theme="hot-red">
              <div class="theme-name">Hot Red</div>
            </div>
            <div class="theme-option theme-midnight" data-theme="midnight">
              <div class="theme-name">Midnight</div>
            </div>
            <div class="theme-option theme-spotlight" data-theme="spotlight">
              <div class="theme-name">Spotlight</div>
            </div>
            <div class="theme-option theme-sunset" data-theme="sunset">
              <div class="theme-name">Sunset</div>
            </div>
            <div class="theme-option theme-ocean" data-theme="ocean">
              <div class="theme-name">Ocean</div>
            </div>
            <div class="theme-option theme-forest" data-theme="forest">
              <div class="theme-name">Forest</div>
            </div>
            <div class="theme-option theme-fire" data-theme="fire">
              <div class="theme-name">Fire</div>
            </div>
            <div class="theme-option theme-blurple" data-theme="blurple">
              <div class="theme-name">Blurple</div>
            </div>
            <div class="theme-option theme-pastel" data-theme="pastel">
              <div class="theme-name">Pastel</div>
            </div>
            <div class="theme-option theme-blue-bolt" data-theme="blue-bolt">
              <div class="theme-name">Blue Bolt</div>
            </div>
            <div class="theme-option theme-green-glow" data-theme="green-glow">
              <div class="theme-name">Green Glow</div>
            </div>
            <div class="theme-option theme-rainbow" data-theme="rainbow">
              <div class="theme-name">Rainbow</div>
            </div>
            <div class="theme-option theme-emerald" data-theme="emerald">
              <div class="theme-name">Emerald</div>
            </div>
            <div class="theme-option theme-purple-haze" data-theme="purple-haze">
              <div class="theme-name">Purple Haze</div>
            </div>
            <div class="theme-option theme-rose-gold" data-theme="rose-gold">
              <div class="theme-name">Rose Gold</div>
            </div>
            <div class="theme-option theme-teal-sea" data-theme="teal-sea">
              <div class="theme-name">Teal Sea</div>
            </div>
            <div class="theme-option theme-dark-purple" data-theme="dark-purple">
              <div class="theme-name">Dark Purple</div>
            </div>
            <div class="theme-option theme-custom" data-theme="custom">
              <div class="theme-name">Custom ✨</div>
            </div>
          </div>
          <div class="custom-colors" style="margin-top: 16px;">
            <div class="color-picker-field control-field">
              <label for="customA">Custom Color 1</label>
              <div class="color-input-wrapper">
                <input id="customA" type="color" value="#8e2de2">
              </div>
            </div>
            <div class="color-picker-field control-field">
              <label for="customB">Custom Color 2</label>
              <div class="color-input-wrapper">
                <input id="customB" type="color" value="#4a00e0">
              </div>
            </div>
          </div>
        </div>

        <div class="controls-section">
          <h3>🖼️ Cover Image</h3>
          <div class="control-field full">
            <label for="coverInput">Image URL (optional - uses event image if available)</label>
            <input id="coverInput" type="url" placeholder="https://example.com/image.jpg">
          </div>
        </div>
      </div>

      <section class="variants-grid" id="variantsGrid"></section>
    </div>
  </main>

  <script src="../js/logger.js"></script>
  <script src="../js/city-config.js"></script>
  <script src="../js/calendar-core.js"></script>
  <script src="../js/dynamic-calendar-loader.js"></script>
  <script>
    (function(){
      const COMPONENT = 'EVENT';
      logger.componentInit(COMPONENT, 'OpenGraph Image Studio initialized');

      const citySelect = document.getElementById('citySelect');
      const eventSelect = document.getElementById('eventSelect');
      const eventSearch = document.getElementById('eventSearch');
      const reloadBtn = document.getElementById('reloadBtn');
      const randomBtn = document.getElementById('randomBtn');
      const customA = document.getElementById('customA');
      const customB = document.getElementById('customB');
      const coverInput = document.getElementById('coverInput');
      const grid = document.getElementById('variantsGrid');
      const themeOptions = document.querySelectorAll('.theme-option');

      let currentTheme = 'classic-night';

      class CreativeCalendarPreview extends DynamicCalendarLoader {
        constructor() {
          super();
          this.currentCity = this.getInitialCityFromUrl();
          this.filteredEvents = [];
          this.selectedEvent = null;
        }

        getInitialCityFromUrl() {
          try {
            const params = new URLSearchParams(window.location.search);
            const city = params.get('city');
            return city && hasCityCalendar(city) ? city : 'new-york';
          } catch (e) {
            return 'new-york';
          }
        }

        async init() {
          this.populateCities();
          await this.loadCity(this.currentCity);
          this.attachHandlers();
          this.updateThemeVars();
          this.render();
          logger.componentLoad(COMPONENT, 'OpenGraph studio ready');
        }

        populateCities() {
          const cities = getAvailableCities();
          citySelect.innerHTML = cities.map(c => `<option value="${c.key}">${c.emoji} ${c.name}</option>`).join('');
          citySelect.value = this.currentCity;
        }

        async loadCity(cityKey) {
          logger.apiCall('CALENDAR', 'Loading calendar for OpenGraph studio', { cityKey });
          this.currentCity = cityKey;
          const data = await this.loadCalendarData(cityKey);
          if (!data || !this.allEvents || !this.allEvents.length) {
            logger.warn(COMPONENT, 'No events loaded for city', { cityKey });
            eventSelect.innerHTML = '<option>No events found</option>';
            this.filteredEvents = [];
            this.selectedEvent = null;
            this.render();
            return;
          }
          this.filteredEvents = this.allEvents.slice();
          this.filteredEvents.sort((a,b) => (a.name || '').localeCompare(b.name || ''));
          this.populateEventSelect();
          this.selectedEvent = this.filteredEvents[0];
          this.render();
        }

        populateEventSelect() {
          const options = this.filteredEvents.map((ev, idx) => {
            const venue = ev.bar ? ` @ ${ev.bar}` : '';
            const time = ev.time ? ` · ${ev.time}` : '';
            return `<option value="${idx}">${(ev.name || 'Unnamed Event')}${venue}${time}</option>`;
          }).join('');
          eventSelect.innerHTML = options;
          eventSelect.selectedIndex = 0;
        }

        filterEvents(term) {
          const t = (term || '').toLowerCase();
          if (!this.allEvents) return;
          this.filteredEvents = this.allEvents.filter(ev => {
            const text = `${ev.name || ''} ${ev.bar || ''} ${ev.tea || ''}`.toLowerCase();
            return text.includes(t);
          });
          this.filteredEvents.sort((a,b) => (a.name || '').localeCompare(b.name || ''));
          this.populateEventSelect();
          this.selectedEvent = this.filteredEvents[0] || null;
          this.render();
        }

        getPreviewData() {
          const ev = this.selectedEvent || {};
          return {
            event: ev.name || 'Bear Event',
            venue: ev.bar || 'Venue',
            date: ev.day || 'Date TBA',
            time: ev.time || 'Time TBA',
            city: getCityConfig(this.currentCity)?.name || 'City',
            description: ev.tea || 'Join us for an amazing bear community event!',
            cover: (coverInput.value || '').trim() || (ev.image || '').trim()
          };
        }

        attachHandlers() {
          citySelect.addEventListener('change', async () => {
            const cityKey = citySelect.value;
            await this.loadCity(cityKey);
            this.updateUrlCity(cityKey);
          });

          eventSelect.addEventListener('change', () => {
            const idx = eventSelect.value ? parseInt(eventSelect.value, 10) : 0;
            this.selectedEvent = this.filteredEvents[idx] || null;
            this.render();
          });

          eventSearch.addEventListener('input', () => {
            this.filterEvents(eventSearch.value);
          });

          reloadBtn.addEventListener('click', async () => {
            await this.loadCity(this.currentCity);
          });

          randomBtn.addEventListener('click', () => {
            if (!this.filteredEvents.length) return;
            const idx = Math.floor(Math.random() * this.filteredEvents.length);
            this.selectedEvent = this.filteredEvents[idx];
            eventSelect.selectedIndex = idx;
            this.render();
          });

          coverInput.addEventListener('input', () => this.render());

          // Theme selection
          themeOptions.forEach(option => {
            option.addEventListener('click', () => {
              themeOptions.forEach(opt => opt.classList.remove('active'));
              option.classList.add('active');
              currentTheme = option.dataset.theme;
              this.updateThemeVars();
              this.render();
            });
          });

          // Set initial theme
          themeOptions[0].classList.add('active');

          // Custom color inputs
          [customA, customB].forEach(el => {
            el.addEventListener('input', () => {
              this.updateThemeVars();
              if (currentTheme === 'custom') {
                this.render();
              }
            });
          });
        }

        updateThemeVars() {
          document.documentElement.style.setProperty('--custom-color-1', customA.value);
          document.documentElement.style.setProperty('--custom-color-2', customB.value);
          logger.debug(COMPONENT, 'Updated theme', { theme: currentTheme, customColors: [customA.value, customB.value] });
        }

        updateVariant(card, variant, data) {
          const artboard = card.querySelector('.artboard');
          switch(variant.key) {
            case 'split': {
              const t = artboard.querySelector('.event-title');
              const d = artboard.querySelector('.event-date');
              const v = artboard.querySelector('.venue');
              const desc = artboard.querySelector('.description');
              const img = artboard.querySelector('.event-image');
              const leftSide = artboard.querySelector('.left-side');
              if (t) t.textContent = data.event;
              if (d) d.textContent = `${data.date} · ${data.time}`;
              if (v) v.textContent = `@ ${data.venue}`;
              if (desc) desc.textContent = data.description;
              if (img && data.cover) { img.style.backgroundImage = `url('${data.cover}')`; img.style.display = 'block'; }
              if (leftSide) {
                const cover = leftSide.querySelector('.cover');
                if (cover && data.cover) cover.style.backgroundImage = `url('${data.cover}')`;
              }
              break;
            }
            case 'minimal': {
              const t = artboard.querySelector('.event-title');
              const v = artboard.querySelector('.venue');
              const desc = artboard.querySelector('.description');
              const dateBadge = artboard.querySelector('.date-badge');
              const cardHeader = artboard.querySelector('.card-header');
              if (t) t.textContent = data.event;
              if (v) v.textContent = `@ ${data.venue} · ${data.time}`;
              if (desc) desc.textContent = data.description;
              if (dateBadge) dateBadge.textContent = data.date;
              if (cardHeader) {
                const cover = cardHeader.querySelector('.cover');
                if (cover && data.cover) cover.style.backgroundImage = `url('${data.cover}')`;
              }
              break;
            }
            case 'glass': {
              const t = artboard.querySelector('.event-title');
              const d = artboard.querySelector('.event-date');
              const v = artboard.querySelector('.venue');
              const desc = artboard.querySelector('.description');
              const cov = artboard.querySelector('.cover');
              if (t) t.textContent = data.event;
              if (d) d.textContent = `${data.date} · ${data.time}`;
              if (v) v.textContent = `@ ${data.venue}`;
              if (desc) desc.textContent = data.description;
              if (cov && data.cover) cov.style.backgroundImage = `url('${data.cover}')`;
              break;
            }
            case 'circle': {
              const t = artboard.querySelector('.event-title');
              const d = artboard.querySelector('.event-date');
              const v = artboard.querySelector('.venue');
              const desc = artboard.querySelector('.description');
              const img = artboard.querySelector('.event-image');
              if (t) t.textContent = data.event;
              if (d) d.textContent = `${data.date} · ${data.time}`;
              if (v) v.textContent = `@ ${data.venue}`;
              if (desc) desc.textContent = data.description;
              if (img && data.cover) { img.style.backgroundImage = `url('${data.cover}')`; img.style.display = 'block'; }
              break;
            }
            case 'speech': {
              const head = artboard.querySelector('.headline');
              const bubble = artboard.querySelector('.speech-bubble');
              const img = artboard.querySelector('.event-image');
              const cov = artboard.querySelector('.cover');
              if (head) head.textContent = data.event;
              if (bubble) bubble.textContent = `${data.date} · ${data.time} @ ${data.venue}. ${data.description}`;
              if (img && data.cover) { img.style.backgroundImage = `url('${data.cover}')`; img.style.display = 'block'; }
              if (cov && data.cover) cov.style.backgroundImage = `url('${data.cover}')`;
              break;
            }
            case 'speech-event': {
              const title = artboard.querySelector('.event-title');
              const bubble = artboard.querySelector('.speech-bubble');
              const avatar = artboard.querySelector('.event-avatar');
              if (title) title.textContent = data.event;
              if (bubble) bubble.textContent = `Join us ${data.date} at ${data.time}! We're hosting an amazing event at ${data.venue}. ${data.description}`;
              if (avatar && data.cover) avatar.style.backgroundImage = `url('${data.cover}')`;
              break;
            }
            case 'speech-dual': {
              const bubble1 = artboard.querySelector('.speech-bubble-1');
              const bubble2 = artboard.querySelector('.speech-bubble-2');
              const avatar = artboard.querySelector('.event-avatar');
              if (bubble1) bubble1.textContent = `Hey! Have you heard about ${data.event}?`;
              if (bubble2) bubble2.textContent = `Yes! It's ${data.date} at ${data.time} @ ${data.venue}. ${data.description}`;
              if (avatar && data.cover) avatar.style.backgroundImage = `url('${data.cover}')`;
              break;
            }
            case 'speech-terminal': {
              const content = artboard.querySelector('.terminal-content');
              const img = artboard.querySelector('.event-image');
              if (content) {
                content.innerHTML = `$ cat event_info.txt<br/>
EVENT: ${data.event}<br/>
DATE: ${data.date}<br/>
TIME: ${data.time}<br/>
VENUE: ${data.venue}<br/>
INFO: ${data.description}<br/>
$ ./join_event.sh<br/>
Loading... <span class="cursor">█</span>`;
              }
              if (img && data.cover) img.style.backgroundImage = `url('${data.cover}')`;
              break;
            }
            case 'speech-story': {
              const title = artboard.querySelector('.event-title');
              const bubble = artboard.querySelector('.story-bubble');
              const bg = artboard.querySelector('.story-bg');
              const name = artboard.querySelector('.profile-name');
              const time = artboard.querySelector('.profile-time');
              if (title) title.textContent = data.event;
              if (bubble) bubble.textContent = `Can't wait for this! ${data.date} at ${data.time} 🎉`;
              if (bg && data.cover) bg.style.backgroundImage = `url('${data.cover}')`;
              if (name) name.textContent = 'chunky.dad';
              if (time) time.textContent = '2h ago';
              break;
            }
            case 'speech-thought': {
              const title = artboard.querySelector('.event-title');
              const cloud = artboard.querySelector('.thought-cloud');
              const img = artboard.querySelector('.event-image');
              if (title) title.textContent = data.event;
              if (cloud) cloud.textContent = `I'm dreaming about ${data.event}... ${data.date} at ${data.venue} will be perfect! ${data.description}`;
              if (img && data.cover) img.style.backgroundImage = `url('${data.cover}')`;
              break;
            }
            case 'speech-messenger': {
              const title = artboard.querySelector('.chat-title');
              const bubble = artboard.querySelector('.message-bubble');
              const img = artboard.querySelector('.message-image');
              if (title) title.textContent = data.event;
              if (bubble) bubble.textContent = `Hey! ${data.event} is happening ${data.date} at ${data.time} @ ${data.venue}. You coming?`;
              if (img && data.cover) img.style.backgroundImage = `url('${data.cover}')`;
              break;
            }
            case 'speech-discord': {
              const channel = artboard.querySelector('.channel-name');
              const author = artboard.querySelector('.message-author');
              const time = artboard.querySelector('.message-time');
              const text = artboard.querySelector('.message-text');
              const img = artboard.querySelector('.embed-image');
              if (channel) channel.textContent = `# ${data.event.toLowerCase().replace(/\s+/g, '-')}`;
              if (author) author.textContent = 'chunky.dad';
              if (time) time.textContent = 'Today at 12:34 PM';
              if (text) text.textContent = `@everyone ${data.event} is happening ${data.date} at ${data.venue}!`;
              if (img && data.cover) img.style.backgroundImage = `url('${data.cover}')`;
              break;
            }
          }
        }

        buildVariantCard(variant, data) {
          const card = document.createElement('div');
          card.className = 'variant-card';
          
          card.innerHTML = `
            <div class="variant-header">
              <div>
                <div class="variant-title">${variant.name}</div>
                <div class="variant-description">${variant.description}</div>
              </div>
            </div>
            <div class="variant-preview">
              <div class="artboard ${variant.class} theme-${currentTheme}">
                ${this.createVariantHTML(variant)}
              </div>
            </div>
          `;
          return card;
        }

        createVariantHTML(variant) {
          const layouts = {
            'split': `
              <div class="left-side">
                <div class="cover"></div>
              </div>
              <div class="left-content">
                <div class="brand">chunky.dad</div>
                <div class="event-title"></div>
                <div class="event-date"></div>
                <div class="venue"></div>
              </div>
              <div class="right-side">
                <div class="event-image"></div>
              </div>
              <div class="description"></div>
            `,
            'minimal': `
              <div class="card">
                <div class="card-header">
                  <div class="cover"></div>
                  <div class="overlay"></div>
                  <div class="date-badge"></div>
                </div>
                <img class="event-image" src="../Rising_Star_Ryan_Head_Compressed.png" alt="chunky.dad" />
                <div class="card-body">
                  <div class="event-title"></div>
                  <div class="venue"></div>
                  <div class="description"></div>
                </div>
                <div class="brand">chunky.dad</div>
              </div>
            `,
            'glass': `
              <div class="cover"></div>
              <div class="glass">
                <div class="inner">
                  <div class="event-title"></div>
                  <div class="event-date"></div>
                  <div class="venue"></div>
                  <div class="description"></div>
                </div>
              </div>
            `,
            'circle': `
              <div class="ring"></div>
              <div class="event-image"></div>
              <div class="text">
                <div class="event-title"></div>
                <div class="event-date"></div>
                <div class="venue"></div>
              </div>
              <div class="description"></div>
            `,
            'speech': `
              <div class="cover"></div>
              <div class="headline"></div>
              <img class="logo-avatar" src="../Rising_Star_Ryan_Head_Compressed.png" alt="chunky.dad" />
              <div class="speech-bubble"></div>
              <div class="brand">chunky.dad</div>
            `,
            'speech-event': `
              <div class="title-bg"></div>
              <div class="event-title"></div>
              <div class="event-avatar"></div>
              <div class="speech-bubble"></div>
              <div class="brand">chunky.dad</div>
            `,
            'speech-dual': `
              <img class="logo-avatar" src="../Rising_Star_Ryan_Head_Compressed.png" alt="chunky.dad" />
              <div class="event-avatar"></div>
              <div class="speech-bubble-1"></div>
              <div class="speech-bubble-2"></div>
            `,
            'speech-terminal': `
              <div class="terminal-window">
                <div class="terminal-header">
                  <div class="terminal-buttons">
                    <div class="terminal-button"></div>
                    <div class="terminal-button"></div>
                    <div class="terminal-button"></div>
                  </div>
                </div>
                <div class="terminal-content"></div>
                <div class="event-image"></div>
              </div>
            `,
            'speech-story': `
              <div class="story-frame">
                <div class="story-bg"></div>
                <div class="story-overlay"></div>
                <div class="profile-section">
                  <img class="profile-avatar" src="../Rising_Star_Ryan_Head_Compressed.png" alt="chunky.dad" />
                  <div class="profile-info">
                    <div class="profile-name">chunky.dad</div>
                    <div class="profile-time">2h ago</div>
                  </div>
                </div>
                <div class="event-title"></div>
                <div class="story-bubble"></div>
              </div>
            `,
            'speech-thought': `
              <div class="event-title"></div>
              <img class="dreamer" src="../Rising_Star_Ryan_Head_Compressed.png" alt="dreamer" />
              <div class="thought-cloud"></div>
              <div class="thought-bubble-1"></div>
              <div class="thought-bubble-2"></div>
              <div class="thought-bubble-3"></div>
              <div class="event-image"></div>
            `,
            'speech-messenger': `
              <div class="chat-container">
                <div class="chat-header">
                  <img class="chat-avatar" src="../Rising_Star_Ryan_Head_Compressed.png" alt="chunky.dad" />
                  <div class="chat-title"></div>
                </div>
                <div class="chat-body">
                  <div class="message-image"></div>
                  <div class="message-bubble"></div>
                  <div class="typing-indicator">
                    <div class="typing-dots">
                      <div class="typing-dot"></div>
                      <div class="typing-dot"></div>
                      <div class="typing-dot"></div>
                    </div>
                    chunky.dad is typing...
                  </div>
                </div>
              </div>
            `,
            'speech-discord': `
              <div class="discord-container">
                <div class="discord-sidebar"></div>
                <div class="discord-main">
                  <div class="discord-header">
                    <div class="channel-name"># general</div>
                  </div>
                  <div class="discord-messages">
                    <div class="message">
                      <img class="message-avatar" src="../Rising_Star_Ryan_Head_Compressed.png" alt="chunky.dad" />
                      <div class="message-content">
                        <div class="message-header">
                          <div class="message-author">chunky.dad</div>
                          <div class="message-time">Today at 12:34 PM</div>
                        </div>
                        <div class="message-text"></div>
                        <div class="message-embed">
                          <div class="embed-image"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            `,
          };
          return layouts[variant.key] || '';
        }

        render() {
          const data = this.getPreviewData();
          const VARIANTS = [
            { key: 'split', name: 'Split Screen', class: 'layout-split-screen', description: 'Dynamic diagonal composition with image focus' },
            { key: 'minimal', name: 'Minimalist Card', class: 'layout-minimal', description: 'Clean modern design with subtle shadows' },
            { key: 'glass', name: 'Glass Card', class: 'layout-glass', description: 'Frosted glass over photo backdrop' },
            { key: 'circle', name: 'Circle Focus', class: 'layout-circle', description: 'Circular image focus with side text' },
            { key: 'speech', name: 'Speech Bubble', class: 'layout-speech', description: 'Logo speaks about the event' },
            { key: 'speech-event', name: 'Event Image Speaks', class: 'layout-speech-event', description: 'Event image in circular frame speaks' },
            { key: 'speech-dual', name: 'Dual Conversation', class: 'layout-speech-dual', description: 'Logo and event having a conversation' },
            { key: 'speech-terminal', name: 'Retro Terminal', class: 'layout-speech-terminal', description: 'Old-school computer terminal' },
            { key: 'speech-story', name: 'Instagram Story', class: 'layout-speech-story', description: 'Social media story format' },
            { key: 'speech-thought', name: 'Thought Cloud', class: 'layout-speech-thought', description: 'Dreamy thought bubble' },
            { key: 'speech-messenger', name: 'Messenger Chat', class: 'layout-speech-messenger', description: 'Facebook Messenger style' },
            { key: 'speech-discord', name: 'Discord Chat', class: 'layout-speech-discord', description: 'Gaming chat platform style' }
          ];

          grid.innerHTML = '';
          const artboards = [];
          VARIANTS.forEach(variant => {
            const card = this.buildVariantCard(variant, data);
            this.updateVariant(card, variant, data);
            grid.appendChild(card);
            const art = card.querySelector('.artboard');
            artboards.push({ art, card });
          });

          requestAnimationFrame(() => {
            artboards.forEach(({ art }) => {
              const preview = art.closest('.variant-preview');
              if (!preview) return;
              const pw = preview.clientWidth;
              const ph = preview.clientHeight;
              const scale = Math.min(pw / 1200, ph / 630);
              art.style.transform = `scale(${scale})`;
            });
          });
        }

        updateUrlCity(city) {
          try {
            const url = new URL(window.location.href);
            url.searchParams.set('city', city);
            history.replaceState({}, '', url);
          } catch (e) {}
        }
      }

      document.addEventListener('DOMContentLoaded', async () => {
        const app = new CreativeCalendarPreview();
        await app.init();
        window._creativePreviewApp = app;
      });
    })();
  </script>
</body>
</html>
